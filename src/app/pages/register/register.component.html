<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <mat-icon class="register-icon">person_add</mat-icon>
      <h1 class="register-title">Dołącz do nas</h1>
      <p class="register-subtitle">Stwórz konto i zacznij swoją fitness journey</p>
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Nazwa użytkownika</mat-label>
        <input matInput formControlName="username" placeholder="Wprowadź nazwę użytkownika">
        <mat-icon matSuffix>person</mat-icon>
        <mat-error *ngIf="registerForm.get('username')?.hasError('required')">
          Nazwa użytkownika jest wymagana
        </mat-error>
        <mat-error *ngIf="registerForm.get('username')?.hasError('minlength')">
          Nazwa użytkownika musi mieć co najmniej 3 znaki
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Adres email</mat-label>
        <input matInput formControlName="email" type="email" placeholder="twoj@email.com">
        <mat-icon matSuffix>email</mat-icon>
        <mat-error *ngIf="registerForm.get('email')?.hasError('required')">
          Adres email jest wymagany
        </mat-error>
        <mat-error *ngIf="registerForm.get('email')?.hasError('email')">
          Wprowadź poprawny adres email
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Hasło</mat-label>
        <input matInput type="password" formControlName="password" placeholder="Wprowadź hasło">
        <mat-icon matSuffix>lock</mat-icon>
        <mat-hint>Min. 8 znaków: duża litera, mała litera, cyfra, znak specjalny</mat-hint>
        <mat-error *ngIf="registerForm.get('password')?.hasError('required')">
          Hasło jest wymagane
        </mat-error>
        <mat-error *ngIf="registerForm.get('password')?.hasError('minlength')">
          Hasło musi mieć co najmniej 8 znaków
        </mat-error>
        <mat-error *ngIf="registerForm.get('password')?.hasError('maxlength')">
          Hasło może mieć maksymalnie 32 znaki
        </mat-error>
        <mat-error *ngIf="registerForm.get('password')?.hasError('pattern')">
          Hasło musi zawierać: dużą literę, małą literę, cyfrę i znak specjalny (!&#64;#$%^&*)
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Powtórz hasło</mat-label>
        <input matInput type="password" formControlName="confirmPassword" placeholder="Powtórz hasło">
        <mat-icon matSuffix>lock</mat-icon>
        <mat-error *ngIf="registerForm.hasError('passwordsMismatch')">
          Hasła muszą być identyczne
        </mat-error>
      </mat-form-field>

      <div class="error-message" *ngIf="apiError">
        <mat-icon>error</mat-icon>
        <span>{{ apiError }}</span>
      </div>

      <button mat-raised-button type="submit" class="register-button" [disabled]="registerForm.invalid || loading">
        <mat-icon *ngIf="!loading">rocket_launch</mat-icon>
        <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
        <span>{{ loading ? 'Tworzenie konta...' : 'Stwórz konto' }}</span>
      </button>
    </form>

    <div class="login-link">
      <p>Masz już konto? <a routerLink="/login">Zaloguj się</a></p>
    </div>
  </div>
</div>
